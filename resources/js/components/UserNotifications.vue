<template>
   <div class="relative" v-if="notifications.length">
       <a href="#"
          class=""
          data-toggle="dropdown"
       >
           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 447.047 447.047" width="24" height="24" stroke="#000" stroke-width="0">
               <path d="M360.448 188.033c-19.231-19.231-44.801-29.822-71.998-29.822-11.521 0-22.743 1.92-33.322 5.573l4.067-6.44c2.949-4.669 1.555-10.846-3.115-13.795-4.67-2.95-10.846-1.554-13.795 3.115l-9.758 15.451a162.845 162.845 0 00-5.766-28.661C289.72 127.59 339.17 74.465 339.17 10c0-5.523-4.478-10-10-10-57.974 0-106.776 39.994-120.283 93.839a164.65 164.65 0 00-23.225-29.168c-3.906-3.905-10.236-3.905-14.143 0-3.905 3.905-3.905 10.237 0 14.143 21.721 21.721 35.607 49.184 40.26 78.963l-7.015-11.111c-2.948-4.669-9.124-6.066-13.794-3.118-4.671 2.948-6.066 9.125-3.118 13.794l4.067 6.441a101.935 101.935 0 00-33.323-5.573c-27.197 0-52.766 10.591-71.997 29.823-39.698 39.699-39.698 104.295 0 143.995l99.53 99.53c9.988 9.988 23.268 15.489 37.394 15.489 14.125 0 27.405-5.501 37.394-15.489l99.53-99.531c39.699-39.698 39.699-104.294.001-143.994zM318.641 20.529c-4.943 48.959-43.982 87.999-92.941 92.942 4.943-48.959 43.982-87.999 92.941-92.942zm27.664 297.357l-99.53 99.53c-6.211 6.211-14.468 9.631-23.251 9.631s-17.041-3.42-23.251-9.631l-99.53-99.53c-31.901-31.902-31.901-83.809 0-115.711 15.453-15.454 36-23.964 57.854-23.964s42.401 8.511 57.855 23.965a10.003 10.003 0 0014.142 0c15.453-15.454 36-23.964 57.854-23.964s42.401 8.511 57.855 23.964c31.903 31.901 31.903 83.808.002 115.71z" stroke="none"/><path d="M177.659 197.424c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM121.659 228.174c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM167.659 286.174c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM247.659 258.174c0-5.523-4.478-10-10-10s-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5zM291.659 202.174c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM315.659 276.674c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM255.659 328.174c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10zM207.659 356.174c-5.522 0-10 4.477-10 10v16.5c0 5.523 4.478 10 10 10s10-4.477 10-10v-16.5c0-5.523-4.477-10-10-10z" stroke="none"/>
           </svg>
       </a>

       <ul class="">
           <li v-for="notification in notifications">
               <a :href="notification.data.link"
                  v-text="notification.data.message"
                  @click="markAsRead(notification)"
               ></a>
           </li>
       </ul>
   </div>
</template>

<script>
    export default {
        name: "UserNotifications",

        data() {
            return {
                notifications: false,
            }
        },

        created() {
            axios.get("/profiles/"+window.App.user.name +"/notifications")
            .then(response => this.notifications = response.data);
        },

        methods: {
          markAsRead (notification) {
              axios.delete('/profiles/'+window.App.user.name + '/notifications/' + notification.id)
          }
        }
    }
</script>

<style scoped>

</style>
